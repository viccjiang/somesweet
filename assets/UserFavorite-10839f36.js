import{c as u}from"./UserCartStore-ffdf0521.js";import{_ as F,m as w,a as C,r as l,o as i,b as a,d as e,e as m,w as p,F as _,i as P,f as n,g as A,s as I,t as h,h as S,p as E,k as T}from"./index-7af5062d.js";import{s as g}from"./LocalStorage-934dfab6.js";import{R as z}from"./RecommendProductsSwiper-d4a3b316.js";const{VITE_APP_URL:f,VITE_APP_PATH:v}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},L={data(){return{products:[],product:{},pagination:{},status:{loadingItem:""},categories:[],selectCategory:"",myFavorite:g.get()||[],favorites:[]}},components:{RecommendSwiper:z},methods:{getProducts(){const t=`${f}api/${v}/products/all`;this.isLoading=!0,this.$http.get(t).then(s=>{this.products=s.data.products,this.isLoading=!1,s.data.success&&(this.products=s.data.products,this.getFavorites())})},getFavorites(){this.favorites=[];const t=JSON.parse(localStorage.getItem("myFavorite"))||[];for(let s=0;s<this.products.length;s+=1)for(let r=0;r<t.length;r+=1)this.products[s].id===t[r]&&this.favorites.push(this.products[s])},addMyFavorite(t){this.myFavorite.includes(t.id)?(this.myFavorite.splice(this.myFavorite.indexOf(t.id),1),this.getFavorites(),this.getProducts()):this.myFavorite.push(t.id)},getCategories(){const t=new Set;this.products.forEach(s=>{t.add(s.category)}),this.categories=[...t]},getProduct(t){this.$router.push(`/product/${t}`)},addCart(t){const s=`${f}api/${v}/cart`;this.status.loadingItem=t;const r={product_id:t,qty:1};this.$http.post(s,{data:r}).then(()=>{this.status.loadingItem=""})},...w(u,["getCarts","addToCart","showAlert"])},watch:{myFavorite:{handler(){g.save(this.myFavorite)},deep:!0}},computed:{...C(u,["cartData","cartsLength"]),filterProducts(){return this.products.filter(t=>t.category.match(this.selectCategory))}},created(){this.getProducts()}},c=t=>(E("data-v-c30115dd"),t=t(),T(),t),N=c(()=>e("div",{class:"card border-0 rounded-0 bg-dark text-white mb-5"},[e("img",{class:"filters",style:{height:"200px","background-image":"url(https://storage.googleapis.com/vue-course-api.appspot.com/jiangs2023/1678427520180.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=iiSXN5mn0QTpMZpCBona7iXC45A8l18MWoXV3f9zkFNXV47vzXChdxwu9AV0IoPn8ZEAiTgDHIUGAMcm9o7tFLdepA0zSQDRH7uVuFecAFC8WwDjdsW6atcFIgXJ3uS7Hxj8NLo98Z0GhE%2BkoNLEU%2BqsgqQie4yEQqMBm4CMhPBWWbPubph%2FPy78DCyigupkALfHCrkeE%2F23dLTuUHk%2B2SBwT9WsAp8znKZj%2FqKeCuBtzw%2BtGHdff34FmEM3%2Fa6eYoYePCg4A03db%2FHg9jPHcpf8zpJp4d2UuKcnM%2F1ToEU9zOC0NNmuH6876kGOdXsc9n4Pes7QbmNTZmkr5VzQvA%3D%3D)","background-size":"cover","background-position":"top top","background-attachment":"fixed"}}),e("div",{class:"card-img-overlay d-flex flex-column justify-content-center align-item-center"},[e("h1",{class:"card-title text-center fw-bold"},"願望清單")])],-1)),V={class:"container mt-0 mt-md-10 mb-0 mb-md-10"},B={class:"g-4 row row-cols-1 row-cols-md-2 row-cols-lg-3 flex-column justify-content-center flex-md-row"},D={key:0,class:"d-flex flex-column justify-content-center align-items-center"},M=c(()=>e("h3",{class:"text-center mb-2 pb-3"},"目前沒有收藏任何商品",-1)),U=c(()=>e("i",{class:"bi bi-bag"},null,-1)),j={class:"product card h-100 p-5 rounded-4 products-img"},H={class:"overflow-hidden rounded-4"},R=["src","alt"],$=["onClick"],X={key:0,style:{"z-index":"1"},class:"fs-1 bi bi-bookmark-heart-fill position-absolute top-0 start-15 text-warning"},O={key:1,style:{"z-index":"1"},class:"fs-1 bi bi-bookmark position-absolute top-0 start-15 text-white"},Q={class:"card-body d-flex flex-column"},W={class:"fs-6 fw-bold card-title mb-6"},q={class:"d-flex mt-auto"},G={class:"text-muted fs-xs me-auto"},Z={class:"card-text mb-0"},J=c(()=>e("span",{class:"fs-xs d-flex align-items-end ms-1"},"NTD",-1)),K={class:"text-center border-0"},Y=["disabled","onClick"],tt={key:0,class:"spinner-border text-light spinner-border-sm",role:"status"},et={class:"bg-light py-10"},st={class:"container"},ot=c(()=>e("p",{class:"fs-3 fw-bold py-2 text-dark text-start border-bottom mb-10"}," 你可能也會喜歡 ",-1));function it(t,s,r,at,d,b){const y=l("RouterLink"),k=l("router-link"),x=l("RecommendSwiper");return i(),a(_,null,[N,e("div",V,[e("div",B,[d.favorites.length===0?(i(),a("div",D,[M,m(y,{to:"/products",class:"btn btn-soft mb-5 mb-md-0"},{default:p(()=>[U,n(" 來去收藏喜歡的商品 ")]),_:1})])):(i(!0),a(_,{key:1},P(d.favorites,o=>(i(),a("div",{class:"col-md-4",key:o.id},[e("div",j,[e("div",H,[e("img",{src:o.imageUrl,class:"card-img-top object-fit rounded-4 position-relative card-imageUrl",alt:o.title},null,8,R)]),e("a",{href:"#",onClick:A(rt=>b.addMyFavorite(o),["prevent"]),class:I([{active:d.myFavorite.includes(o.id)},"link-secondary d-block rounded-0"])},[d.myFavorite.includes(o.id)?(i(),a("i",X)):(i(),a("i",O))],10,$),e("div",Q,[e("h5",W,h(o.title),1),e("div",q,[e("span",G,[e("del",null,"NT$"+h(o.origin_price),1)]),e("p",Z,"$"+h(o.price),1),n(),J]),e("small",K,[m(k,{class:"text-dark d-block",to:`/product/${o.id}`},{default:p(()=>[n("查 看 細 節")]),_:2},1032,["to"])])]),e("button",{type:"buttom",class:"btn btn-primary mt-5",disabled:this.status.loadingItem===o.id,onClick:()=>t.addToCart(o.id)},[this.status.loadingItem===o.id?(i(),a("div",tt)):S("",!0),n(" 加入購物車 ")],8,Y)])]))),128))])]),e("div",et,[e("div",st,[ot,m(x)])])],64)}const mt=F(L,[["render",it],["__scopeId","data-v-c30115dd"]]);export{mt as default};
