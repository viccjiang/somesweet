import{U as b}from"./UserCartStepComponent-e5b61bdb.js";import{_ as f,r as a,o as n,b as d,e as _,d as t,t as s,F as p,i as v,h,w as g,f as C}from"./index-a8cd85d7.js";const{VITE_APP_URL:u,VITE_APP_PATH:m}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},x={data(){return{order:{user:{}},orderId:""}},components:{UserCartStepComponent:b},methods:{getOrder(){const r=`${u}api/${m}/order/${this.orderId}`;this.$http.get(r).then(e=>{e.data.success&&(this.order=e.data.order,console.log(this.order))})},payOrder(){const r=`${u}v2/api/${m}/pay/${this.orderId}`;this.$http.post(r).then(e=>{e.data.success&&(this.order.is_paid=!0,this.$router.push({path:"/order_completed",query:{id:this.orderId}}),this.getOrder())})},copyCouponCode(r){const e=l=>document.querySelector(l);e("#orderSave").addEventListener("click",()=>{navigator.clipboard.writeText(e("#orderId").textContent),this.showAlert()})},dateTranslate(r){return new Date(r*1e3).toLocaleDateString()},showAlert(){this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",this.$swal.stopTimer),e.addEventListener("mouseleave",this.$swal.resumeTimer)}}).fire({icon:"success",title:"優惠碼複製成功"})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()},mounted(){this.copyCouponCode()}},k={class:"bg-light pt-5 pb-7 mt-10"},T={class:"container pt-10 pb-10"},P={class:"row justify-content-center flex-column flex-md-row"},E={class:"col-md-8 sticky-lg-top position-lg-sticky h-50"},I={class:"border rounded-4 p-4 mb-4"},L={class:"d-flex justify-content-between"},O=t("h4",{class:"mb-4"},"訂購資訊",-1),A={class:"table align-middle"},S={class:"align-middle"},V=t("th",{scope:"col"},"訂購編號",-1),D={scope:"col",id:"orderId"},U=t("th",{scope:"col"},"訂購日期",-1),B={scope:"col"},R=t("th",{scope:"row"},"姓名",-1),N=t("th",{scope:"row"},"Email",-1),j=t("th",{scope:"row"},"電話",-1),q={scope:"row"},F=t("th",{scope:"row"},"地址",-1),H={scope:"row"},M=t("th",{scope:"row"},"訂購產品",-1),$={scope:"row"},z={class:"w-100"},G={class:""},J={class:"mb-0"},K={class:"mb-0"},Q=t("th",{scope:"row"},"付款金額",-1),W={scope:"row"},X=t("th",{scope:"row"},"付款方式",-1),Y={scope:"row"},Z=t("th",{scope:"row"},"付款狀態",-1),tt={scope:"row"},et={key:0,class:"text-danger"},ot={key:1,class:"text-success"},st={key:0,type:"button",class:"btn btn-primary float-end rounded-4"};function rt(r,e,l,nt,o,i){const w=a("UserCartStepComponent"),y=a("RouterLink");return n(),d(p,null,[_(w),t("div",k,[t("div",T,[t("div",P,[t("div",E,[t("div",I,[t("div",L,[O,t("button",{type:"button",id:"orderSave",class:"btn btn-outline-primary",onClick:e[0]||(e[0]=c=>i.copyCouponCode(o.order.id))},"複製訂單編號")]),t("table",A,[t("thead",null,[t("tr",S,[V,t("th",D,[t("span",null,s(o.order.id),1)])])]),t("tbody",null,[t("tr",null,[U,t("td",B,s(i.dateTranslate(o.order.create_at)),1)]),t("tr",null,[R,t("td",null,s(o.order.user.name),1)]),t("tr",null,[N,t("td",null,s(o.order.user.email),1)]),t("tr",null,[j,t("td",q,s(o.order.user.tel),1)]),t("tr",null,[F,t("td",H,s(o.order.user.address),1)]),t("tr",null,[M,t("td",$,[(n(!0),d(p,null,v(o.order.products,c=>(n(),d("div",{class:"",key:c.id},[t("div",z,[t("div",G,[t("p",J,[C(s(c.product.title)+" ",1),t("span",K," x "+s(c.qty),1)])])])]))),128))])]),t("tr",null,[Q,t("td",W,s(o.order.total),1)]),t("tr",null,[X,t("td",Y,s(o.order.user.shipping),1)]),t("tr",null,[Z,t("td",tt,[o.order.is_paid?(n(),d("span",ot,"付款完成")):(n(),d("span",et,"未付款"))])])])])]),o.order.is_paid?h("",!0):(n(),d("button",{key:0,type:"button",class:"btn btn-primary float-end rounded-4",onClick:e[1]||(e[1]=(...c)=>i.payOrder&&i.payOrder(...c))},"確認付款")),_(y,{to:"/products"},{default:g(()=>[o.order.is_paid?(n(),d("button",st,"繼續購物")):h("",!0)]),_:1})])])])])],64)}const it=f(x,[["render",rt]]);export{it as default};
