import{U as b}from"./UserCartStepComponent-8faf9ee1.js";import{_ as f,r as _,o as r,b as n,e as p,d as t,t as s,F as a,i as v,h,w as C,f as g}from"./index-153a3ca8.js";const{VITE_APP_URL:u,VITE_APP_PATH:m}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},x={data(){return{order:{user:{}},orderId:""}},components:{UserCartStepComponent:b},methods:{getOrder(){const d=`${u}api/${m}/order/${this.orderId}`;this.$http.get(d).then(e=>{e.data.success&&(this.order=e.data.order,console.log(this.order))})},payOrder(){const d=`${u}v2/api/${m}/pay/${this.orderId}`;this.$http.post(d).then(e=>{e.data.success&&(this.order.is_paid=!0,this.$router.push({path:"/order_completed",query:{id:this.orderId}}),this.getOrder())})},copyCouponCode(d){const e=l=>document.querySelector(l);e("#orderSave").addEventListener("click",()=>{navigator.clipboard.writeText(e("#orderId").textContent),this.showAlert()})},showAlert(){this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",this.$swal.stopTimer),e.addEventListener("mouseleave",this.$swal.resumeTimer)}}).fire({icon:"success",title:"優惠碼複製成功"})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()},mounted(){this.copyCouponCode()}},k={class:"bg-light pt-5 pb-7 mt-10"},P={class:"container pt-10 pb-10"},E={class:"row justify-content-center flex-column flex-md-row"},I={class:"col-md-8 sticky-lg-top position-lg-sticky h-50"},T={class:"border rounded-4 p-4 mb-4"},O={class:"d-flex justify-content-between"},A=t("h4",{class:"mb-4"},"訂購資訊",-1),L={class:"table align-middle"},V={class:"align-middle"},S=t("th",{scope:"col"},"訂購編號",-1),U={scope:"col",id:"orderId"},B=t("th",{scope:"col"},"訂購日期",-1),R={scope:"col"},D=t("th",{scope:"row"},"姓名",-1),N=t("th",{scope:"row"},"Email",-1),j=t("th",{scope:"row"},"電話",-1),q={scope:"row"},F=t("th",{scope:"row"},"地址",-1),H={scope:"row"},$=t("th",{scope:"row"},"訂購產品",-1),M={scope:"row"},z={class:"w-100"},G={class:""},J={class:"mb-0"},K={class:"mb-0"},Q=t("th",{scope:"row"},"付款金額",-1),W={scope:"row"},X=t("th",{scope:"row"},"付款方式",-1),Y={scope:"row"},Z=t("th",{scope:"row"},"付款狀態",-1),tt={scope:"row"},et={key:0,class:"text-danger"},ot={key:1,class:"text-success"},st={key:0,type:"button",class:"btn btn-primary float-end"};function rt(d,e,l,nt,o,c){const w=_("UserCartStepComponent"),y=_("RouterLink");return r(),n(a,null,[p(w),t("div",k,[t("div",P,[t("div",E,[t("div",I,[t("div",T,[t("div",O,[A,t("button",{type:"button",id:"orderSave",class:"btn btn-outline-primary",onClick:e[0]||(e[0]=i=>c.copyCouponCode(o.order.id))},"複製訂單編號")]),t("table",L,[t("thead",null,[t("tr",V,[S,t("th",U,[t("span",null,s(o.order.id),1)])])]),t("tbody",null,[t("tr",null,[B,t("td",R,s(o.order.create_at),1)]),t("tr",null,[D,t("td",null,s(o.order.user.name),1)]),t("tr",null,[N,t("td",null,s(o.order.user.email),1)]),t("tr",null,[j,t("td",q,s(o.order.user.tel),1)]),t("tr",null,[F,t("td",H,s(o.order.user.address),1)]),t("tr",null,[$,t("td",M,[(r(!0),n(a,null,v(o.order.products,i=>(r(),n("div",{class:"",key:i.id},[t("div",z,[t("div",G,[t("p",J,[g(s(i.product.title)+" ",1),t("span",K," x "+s(i.qty),1)])])])]))),128))])]),t("tr",null,[Q,t("td",W,s(o.order.total),1)]),t("tr",null,[X,t("td",Y,s(o.order.user.shipping),1)]),t("tr",null,[Z,t("td",tt,[o.order.is_paid?(r(),n("span",ot,"付款完成")):(r(),n("span",et,"未付款"))])])])])]),o.order.is_paid?h("",!0):(r(),n("button",{key:0,type:"button",class:"btn btn-primary float-end",onClick:e[1]||(e[1]=(...i)=>c.payOrder&&c.payOrder(...i))},"確認付款")),p(y,{to:"/products"},{default:C(()=>[o.order.is_paid?(r(),n("button",st,"繼續購物")):h("",!0)]),_:1})])])])])],64)}const ct=f(x,[["render",rt]]);export{ct as default};
