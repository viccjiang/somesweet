import{c as b}from"./UserCartStore-f1e720b9.js";import{_ as C,m as U,a as k,r as m,o as p,b as h,e as t,d as e,F as v,E as A,t as r,w as u,f as g,D as _,G as D,H as E}from"./index-9de5b8df.js";import{U as P}from"./UserCartStepComponent-1855703f.js";const{VITE_APP_URL:x,VITE_APP_PATH:V}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},S={data(){return{form:{user:{name:"",email:"",tel:"",address:"",shipping:""},message:""},orders:[]}},components:{UserCartStepComponent:P},methods:{getOrders(){const d=`${x}api/${V}/orders`;this.$http.get(d).then(s=>{console.log(s.data.orders),this.orders=s.data.orders})},createOrder(){const d=`${x}api/${V}/order`,s=this.form;this.$http.post(d,{data:s}).then(n=>{console.log(n),n.data.success&&(this.$router.push(`/order_payment/${n.data.orderId}`),this.$refs.form.resetForm()),this.getCarts()}).catch(n=>{alert(n.data.message)})},...U(b,["addToCart","getCarts","updateCartItem","deleteItem","deleteAllItem"])},computed:{...k(b,["cartData","cartsLength"])},mounted(){this.getCarts()}},I={class:"bg-light pt-5 pb-7 mt-5"},N={class:"container"},j={class:"row justify-content-center flex-column flex-md-row"},F={class:"col-md-5 sticky-md-top position-md-sticky h-50"},q={class:"border rounded-4 p-4 mb-4"},L=e("h4",{class:"mb-4"},"訂單明細",-1),O=["src"],$={class:"w-100"},B={class:"d-flex justify-content-between fw-bold"},M={class:"mb-0"},R={class:"mb-0"},H={class:"d-flex justify-content-between"},z={class:"text-muted mb-0"},G={class:"mb-0"},J={class:"table mt-4 border-top border-bottom text-muted"},K=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"原價",-1),Q={class:"text-end border-0 px-0 pt-4"},W=e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"優惠價",-1),X={class:"text-end border-0 px-0 pt-0 pb-4"},Y={class:"d-flex justify-content-between mt-4"},Z=e("p",{class:"mb-0 h4 fw-bold"},"Total",-1),ee={class:"mb-0 h4 fw-bold"},se={class:"p-0"},te={class:""},oe={class:"d-none d-md-grid"},le={class:"col-md-7"},ae={class:"row justify-content-center p-4"},de=e("h4",{class:"mb-4 text-center text-md-start"},"填寫訂購資訊",-1),re={class:"mb-3"},ne=e("label",{for:"email",class:"form-label"},"Email",-1),ie={class:"mb-3"},ce=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),me={class:"mb-3"},_e=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),ue={class:"mb-3"},pe=e("label",{for:"address",class:"form-label"},"收件人地址",-1),he={class:"mb-3"},fe=e("label",{for:"address",class:"form-label"},"交易方式",-1),be=e("option",{value:""},"請選擇交易方式",-1),ve=e("option",{value:"ATM"},"ATM",-1),ge=e("option",{value:"匯款"},"匯款",-1),xe=e("option",{value:"信用卡"},"信用卡",-1),Ve={class:"mb-5"},we=e("label",{for:"message",class:"form-label"},"留言",-1),ye=e("div",{class:"text-end d-grid"},[e("button",{type:"submit",class:"btn btn-danger mb-5 text-white"},"送出訂單")],-1);function Te(d,s,n,Ce,o,w){const y=m("UserCartStepComponent"),f=m("router-link"),i=m("FieldView"),c=m("error-message"),T=m("FormView");return p(),h(v,null,[t(y),e("div",null,[e("div",I,[e("div",N,[e("div",j,[e("div",F,[e("div",q,[L,(p(!0),h(v,null,A(d.cartData.carts,l=>(p(),h("div",{class:"d-flex",key:l.id},[e("img",{src:l.product.imageUrl,alt:"",class:"me-2 my-1 w-50",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,O),e("div",$,[e("div",B,[e("p",M,r(l.product.title),1),e("p",R,"x "+r(l.qty),1)]),e("div",H,[e("p",z,[e("small",null,"NT$"+r(l.product.price),1)]),e("p",G,"NT$"+r(l.final_total),1)])])]))),128)),e("table",J,[e("tbody",null,[e("tr",null,[K,e("td",Q," NT$"+r(d.cartData.total),1)]),e("tr",null,[W,e("td",X," NT$"+r(d.cartData.final_total),1)])])]),e("div",Y,[Z,e("p",ee,"NT$"+r(d.cartData.final_total),1)])]),e("div",se,[e("div",te,[e("div",oe,[t(f,{to:"/cart",class:"btn btn-outline-secondary px-5 mb-5"},{default:u(()=>[g("回上一頁")]),_:1}),t(f,{to:"/products",class:"btn btn-outline-primary px-5"},{default:u(()=>[g("繼續選購")]),_:1})])])])]),e("div",le,[e("div",ae,[de,t(T,{ref:"form",class:"border rounded-4 p-10",onSubmit:w.createOrder},{default:u(({errors:l})=>[e("div",re,[ne,t(i,{id:"email",name:"email",label:"信箱",type:"email",class:_(["form-control rounded-3",{"is-invalid":l.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:o.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>o.form.user.email=a)},null,8,["class","modelValue"]),t(c,{name:"email",class:"invalid-feedback"})]),e("div",ie,[ce,t(i,{id:"name",name:"name",label:"姓名",type:"text",class:_(["form-control rounded-3",{"is-invalid":l.name}]),rules:"required",modelValue:o.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=a=>o.form.user.name=a),placeholder:"請輸入姓名"},null,8,["class","modelValue"]),t(c,{name:"name",class:"invalid-feedback"})]),e("div",me,[_e,t(i,{id:"tel",name:"tel",label:"電話",type:"text",class:_(["form-control rounded-3",{"is-invalid":l.tel}]),rules:"required|min:8|max:10",modelValue:o.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>o.form.user.tel=a),placeholder:"請輸入電話"},null,8,["class","modelValue"]),t(c,{name:"tel",class:"invalid-feedback"})]),e("div",ue,[pe,t(i,{id:"address",name:"address",label:"地址",type:"text",class:_(["form-control rounded-3",{"is-invalid":l.address}]),rules:"required",modelValue:o.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>o.form.user.address=a),placeholder:"請輸入地址"},null,8,["class","modelValue"]),t(c,{name:"address",class:"invalid-feedback"})]),e("div",he,[fe,t(i,{id:"name",name:"trade",label:"交易方式",class:_(["form-select rounded-3",{"is-invalid":l.trade}]),placeholder:"請輸入交易方式",rules:"required",modelValue:o.form.user.shipping,"onUpdate:modelValue":s[4]||(s[4]=a=>o.form.user.shipping=a),as:"select"},{default:u(()=>[be,ve,ge,xe]),_:2},1032,["class","modelValue"]),t(c,{name:"trade",class:"invalid-feedback"})]),e("div",Ve,[we,D(e("textarea",{id:"message",class:"form-control rounded-4",cols:"30",rows:"10","onUpdate:modelValue":s[5]||(s[5]=a=>o.form.user.message=a)},null,512),[[E,o.form.user.message]])]),ye]),_:1},8,["onSubmit"])])])])])])])],64)}const De=C(S,[["render",Te]]);export{De as default};
