import{c as b}from"./UserCartStore-e95559e0.js";import{_ as g,m as f,a as k,r as P,o,b as l,d as t,h as n,F as r,D as _,t as d,e as y,w as p,I as C,j as I,g as h,G as w,H as x,f as v,p as S,i as E}from"./index-843ac64d.js";const{VITE_APP_URL:T,VITE_APP_PATH:V}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/vue_week_07/",MODE:"production",DEV:!1,PROD:!0},A={data(){return{products:[]}},methods:{getProducts(){this.$http.get(`${T}api/${V}/products/all`).then(s=>{console.log("產品列表:",s.data.products),this.products=s.data.products})},getProduct(s){this.$router.push(`/product/${s}`)},...f(b,["addToCart","getCarts","updateCartItem","deleteItem","deleteAllItem","createOrder","getOrders"])},computed:{...k(b,["cartData","cartsLength"])},mounted(){this.getProducts(),this.getCarts()}},c=s=>(S("data-v-bc3bb190"),s=s(),E(),s),D=I('<div class="container" data-v-bc3bb190><p class="mb-10" data-v-bc3bb190>購物車(確認訂單)</p><div class="row g-0" data-v-bc3bb190><ul class="steps row row-cols-4 row-cols-md-4 g-0 mb-4" data-v-bc3bb190><li class="" data-v-bc3bb190><small class="ls-3" data-v-bc3bb190>STEP1</small><span data-v-bc3bb190>購物車(確認訂單)</span></li><li class="" data-v-bc3bb190><small class="ls-3" data-v-bc3bb190>STEP1</small><span data-v-bc3bb190>建立訂單(填寫資料)</span></li><li class="" data-v-bc3bb190><small class="ls-3" data-v-bc3bb190>STEP2</small><span data-v-bc3bb190>建立訂單(確認付款)</span></li><li class="" data-v-bc3bb190><small class="ls-3" data-v-bc3bb190>STEP3</small><span data-v-bc3bb190>完成訂單</span></li></ul></div></div>',1),$={key:0,class:"container"},L={class:"text-start"},U={class:"table align-middle"},B=c(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"100px"}},"數量/單位"),t("th",{class:"text-end"},"單價"),t("th")])],-1)),N=["onClick"],j=["src"],O={class:"input-group input-group-sm"},R=["onUpdate:modelValue","onChange"],H=["value"],M={class:"text-end"},q={class:"text-end"},F=["onClick"],G=c(()=>t("i",{class:"bi bi-trash3 text-danger"},null,-1)),z=[G],J=c(()=>t("td",{colspan:"3",class:"text-end"},"總計",-1)),K={class:"text-end"},Q=c(()=>t("td",null,null,-1)),W=c(()=>t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)),X={class:"text-end text-success"},Y=c(()=>t("td",null,null,-1)),Z={class:"container"},tt={class:"row"},st={class:"d-flex justify-content-between"};function et(s,i,at,ot,lt,m){const u=P("router-link");return o(),l(r,null,[D,s.cartsLength>0?(o(),l("div",$,[t("div",L,[s.cartsLength>0?(o(),l("button",{key:0,class:"btn btn-outline-danger",type:"button",onClick:i[0]||(i[0]=(...e)=>s.deleteAllItem&&s.deleteAllItem(...e))},"清空購物車")):n("",!0)]),t("table",U,[B,t("tbody",null,[s.cartData.carts?(o(!0),l(r,{key:0},_(s.cartData.carts,e=>(o(),l("tr",{key:e.id},[t("td",null,[t("a",{href:"#",onClick:h(a=>m.getProduct(e.product.id),["prevent"])},[t("img",{src:e.product.imageUrl,alt:"",class:"object-fit d-none d-md-block rounded-4",style:{width:"100px",height:"100px"}},null,8,j)],8,N)]),t("td",null,d(e.product.title)+" ",1),t("td",null,[t("div",O,[w(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":a=>e.qty=a,onChange:a=>s.updateCartItem(e)},[(o(),l(r,null,_(20,a=>t("option",{value:a,key:a+"1234578"},d(a),9,H)),64))],40,R),[[x,e.qty]])])]),t("td",M,d(e.total),1),t("td",q,[t("a",{href:"",onClick:h(a=>s.deleteItem(e.id),["prevent"])},z,8,F)])]))),128)):n("",!0)]),t("tfoot",null,[t("tr",null,[J,t("td",K,d(s.cartData.total),1),Q]),t("tr",null,[W,t("td",X,d(s.cartData.final_total),1),Y])])])])):n("",!0),t("div",Z,[t("div",tt,[t("div",st,[y(u,{to:"/products",class:"btn btn-outline-primary px-5"},{default:p(()=>[v("繼續選購")]),_:1}),s.cartsLength>0?(o(),C(u,{key:0,to:"/checkout",class:"btn btn-danger px-5"},{default:p(()=>[v("下一步 ")]),_:1})):n("",!0)])])])],64)}const nt=g(A,[["render",et],["__scopeId","data-v-bc3bb190"]]);export{nt as default};
