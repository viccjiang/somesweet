import{M as I}from"./modal-57afd4bb.js";import{_ as k,o as d,b as a,d as t,f as c,t as l,m as D,a as w,r as _,e as p,h as i,F as h,E as C,w as $,I as M,g as m,G as U,H as A,p as S,i as V}from"./index-60756371.js";import{c as y}from"./UserCartStore-7e1e8239.js";import{U as L}from"./UserCartStepComponent-b69d1a92.js";import"./component-functions-15ac2b43.js";import"./focustrap-9e828eaf.js";const E={props:["product"],data(){return{modal:{}}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new I(this.$refs.delmodal)}},T={id:"delProductModal",ref:"delmodal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},B={class:"modal-dialog"},N={class:"modal-content border-0"},O=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delProductModalLabel",class:"modal-title"},[t("span",null,"刪除產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),R={class:"modal-body"},j={class:"text-danger"},H={class:"modal-footer"},q=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function F(e,r,b,P,g,u){return d(),a("div",T,[t("div",B,[t("div",N,[O,t("div",R,[c(" 是否刪除 "),t("strong",j,l(b.product.title),1),c(" 商品(刪除後將無法恢復)。 ")]),t("div",H,[q,t("button",{type:"button",class:"btn btn-danger",onClick:r[0]||(r[0]=f=>e.$emit("delProduct"))}," 確認刪除 ")])])])],512)}const G=k(E,[["render",F]]);const{VITE_APP_URL:z,VITE_APP_PATH:J}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},K={data(){return{products:[]}},components:{UserCartStepComponent:L,DelModal:G},methods:{getProducts(){this.$http.get(`${z}api/${J}/products/all`).then(e=>{console.log("產品列表:",e.data.products),this.products=e.data.products})},getProduct(e){this.$router.push(`/product/${e}`)},...D(y,["addToCart","getCarts","updateCartItem","deleteItem","deleteAllItem","createOrder","getOrders"])},computed:{...w(y,["cartData","cartsLength"])},mounted(){this.getProducts(),this.getCarts()}},n=e=>(S("data-v-aeedc95c"),e=e(),V(),e),Q={key:0,class:"container"},W={class:"text-start"},X=n(()=>t("i",{class:"bi bi-trash3 text-danger me-2"},null,-1)),Y={class:"table align-middle"},Z=n(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"100px"}},"數量"),t("th",{class:"text-end"},"單價"),t("th")])],-1)),tt=["onClick"],et=["src"],ot=["onClick"],st={class:"input-group input-group-sm"},dt=["onUpdate:modelValue","onChange"],at=["value"],nt={class:"text-end"},lt={class:"text-end"},rt=["onClick"],ct=n(()=>t("i",{class:"bi bi-trash3 text-danger"},null,-1)),it=[ct],ut=n(()=>t("td",{colspan:"3",class:"text-end"},"總計",-1)),_t={class:"text-end"},pt=n(()=>t("td",null,null,-1)),ht=n(()=>t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)),mt={class:"text-end text-success"},bt=n(()=>t("td",null,null,-1)),gt={class:"container"},ft={class:"row"},vt={class:"d-flex justify-content-between"};function Ct(e,r,b,P,g,u){const f=_("UserCartStepComponent"),v=_("router-link"),x=_("DelModal");return d(),a(h,null,[p(f),e.cartsLength>0?(d(),a("div",Q,[t("div",W,[e.cartsLength>0?(d(),a("a",{key:0,class:"border-bottom border-danger text-danger",type:"button",onClick:r[0]||(r[0]=(...o)=>e.deleteAllItem&&e.deleteAllItem(...o))},[X,c("清空所有商品")])):i("",!0)]),t("table",Y,[Z,t("tbody",null,[e.cartData.carts?(d(!0),a(h,{key:0},C(e.cartData.carts,o=>(d(),a("tr",{key:o.id},[t("td",null,[t("a",{href:"#",onClick:m(s=>u.getProduct(o.product.id),["prevent"])},[t("img",{src:o.product.imageUrl,alt:"",class:"object-fit d-none d-md-block rounded-4",style:{width:"100px",height:"100px"}},null,8,et)],8,tt)]),t("td",null,[t("a",{href:"#",class:"text-dark",onClick:m(s=>u.getProduct(o.product.id),["prevent"])},l(o.product.title),9,ot)]),t("td",null,[t("div",st,[U(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":s=>o.qty=s,onChange:s=>e.updateCartItem(o)},[(d(),a(h,null,C(20,s=>t("option",{value:s,key:s+"1234578"},l(s),9,at)),64))],40,dt),[[A,o.qty]])])]),t("td",nt,l(o.total),1),t("td",lt,[t("a",{href:"",onClick:m(s=>e.deleteItem(o.id),["prevent"])},it,8,rt)])]))),128)):i("",!0)]),t("tfoot",null,[t("tr",null,[ut,t("td",_t,l(e.cartData.total),1),pt]),t("tr",null,[ht,t("td",mt,l(e.cartData.final_total),1),bt])])])])):i("",!0),t("div",gt,[t("div",ft,[t("div",vt,[p(v,{to:"/products",class:"btn btn-outline-primary px-5"},{default:$(()=>[c("繼續選購")]),_:1}),e.cartsLength>0?(d(),M(v,{key:0,to:"/checkout",class:"btn btn-danger px-5"},{default:$(()=>[c("下一步 ")]),_:1})):i("",!0)])])]),p(x,{product:g.products,ref:"delModal",onDelProduct:e.deleteItem},null,8,["product","onDelProduct"])],64)}const Dt=k(K,[["render",Ct],["__scopeId","data-v-aeedc95c"]]);export{Dt as default};
