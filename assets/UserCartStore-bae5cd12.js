import{k as d,l as s}from"./index-72e555f3.js";const{VITE_APP_URL:r,VITE_APP_PATH:o}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/vue_week_07/",MODE:"production",DEV:!1,PROD:!0},n=d("cart",{state:()=>({cartData:{},cartsLength:0,status:{loadingItem:""}}),actions:{getCarts(){s.get(`${r}api/${o}/cart`).then(t=>{this.cartData=t.data.data,this.cartsLength=this.cartData.carts.length,console.log(this.cartData,this.cartsLength)})},addToCart(t,a=1){const e={product_id:t,qty:a};console.log(t,a),s.post(`${r}api/${o}/cart`,{data:e}).then(c=>{console.log("加入購物車",c.data),this.getCarts()})},updateCartItem(t){const a={product_id:t.product.id,qty:t.qty};s.put(`${r}api/${o}/cart/${t.id}`,{data:a}).then(e=>{console.log("更新購物車",e.data),this.getCarts()})},deleteItem(t){s.delete(`${r}api/${o}/cart/${t}`).then(a=>{console.log(a),this.getCarts()})},deleteAllItem(){s.delete(`${r}api/${o}/carts`).then(t=>{console.log(t),this.getCarts()})},createOrder(){const t=`${r}api/${o}/order`,a=this.form;s.post(t,{data:a}).then(e=>{console.log(e),alert(e.data.message),this.$refs.form.resetForm(),this.getCarts()}).catch(e=>{alert(e.data.message)})},getOrders(){const t=`${r}api/${o}/orders`;s.get(t).then(a=>{console.log(a.data.orders),this.orders=a.data.orders})}}});export{n as c};
