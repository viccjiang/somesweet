import{U as u}from"./UserCartStepComponent-3a9c421d.js";import{_ as m,r as y,o as d,b as n,e as b,d as t,t as s,F as _,i as w,h as f,f as g}from"./index-739c36da.js";const{VITE_APP_URL:p,VITE_APP_PATH:a}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},v={data(){return{order:{user:{}},orderId:""}},components:{UserCartStepComponent:u},methods:{getOrder(){const c=`${p}api/${a}/order/${this.orderId}`;this.$http.get(c).then(e=>{e.data.success&&(this.order=e.data.order,console.log(this.order))})},payOrder(){const c=`${p}v2/api/${a}/pay/${this.orderId}`;this.$http.post(c).then(e=>{e.data.success&&(this.order.is_paid=!0,this.$router.push({path:"/order_completed",query:{id:this.orderId}}),this.getOrder())})},copyCouponCode(c){const e=l=>document.querySelector(l);e("#orderSave").addEventListener("click",()=>{navigator.clipboard.writeText(e("#orderId").textContent)})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()},mounted(){this.copyCouponCode()}},C={class:"bg-light pt-5 pb-7 mt-5"},x={class:"container"},I={class:"row justify-content-center flex-column flex-md-row"},P={class:"col-md-8 sticky-lg-top position-lg-sticky h-50"},k={class:"border rounded-4 p-4 mb-4"},E={class:"d-flex justify-content-between"},O=t("h4",{class:"mb-4"},"訂購資訊",-1),V={class:"table align-middle"},S={class:"align-middle"},T=t("th",{scope:"col"},"訂購編號",-1),U={scope:"col",id:"orderId"},A=t("th",{scope:"col"},"訂購日期",-1),L={scope:"col"},B=t("th",{scope:"row"},"姓名",-1),D=t("th",{scope:"row"},"Email",-1),N=t("th",{scope:"row"},"電話",-1),R={scope:"row"},j=t("th",{scope:"row"},"地址",-1),q={scope:"row"},F=t("th",{scope:"row"},"訂購產品",-1),H={scope:"row"},M={class:"w-100"},z={class:""},G={class:"mb-0"},J={class:"mb-0"},K=t("th",{scope:"row"},"付款金額",-1),Q={scope:"row"},W=t("th",{scope:"row"},"付款方式",-1),X={scope:"row"},Y=t("th",{scope:"row"},"付款狀態",-1),Z={scope:"row"},$={key:0,class:"text-danger"},tt={key:1,class:"text-success"};function et(c,e,l,ot,o,i){const h=y("UserCartStepComponent");return d(),n(_,null,[b(h),t("div",C,[t("div",x,[t("div",I,[t("div",P,[t("div",k,[t("div",E,[O,t("button",{type:"button",id:"orderSave",class:"btn btn-outline-primary",onClick:e[0]||(e[0]=r=>i.copyCouponCode(o.order.id))},"複製訂單編號")]),t("table",V,[t("thead",null,[t("tr",S,[T,t("th",U,[t("span",null,s(o.order.id),1)])])]),t("tbody",null,[t("tr",null,[A,t("td",L,s(o.order.create_at),1)]),t("tr",null,[B,t("td",null,s(o.order.user.name),1)]),t("tr",null,[D,t("td",null,s(o.order.user.email),1)]),t("tr",null,[N,t("td",R,s(o.order.user.tel),1)]),t("tr",null,[j,t("td",q,s(o.order.user.address),1)]),t("tr",null,[F,t("td",H,[(d(!0),n(_,null,w(o.order.products,r=>(d(),n("div",{class:"",key:r.id},[t("div",M,[t("div",z,[t("p",G,[g(s(r.product.title)+" ",1),t("span",J," x "+s(r.qty),1)])])])]))),128))])]),t("tr",null,[K,t("td",Q,s(o.order.total),1)]),t("tr",null,[W,t("td",X,s(o.order.user.shipping),1)]),t("tr",null,[Y,t("td",Z,[o.order.is_paid?(d(),n("span",tt,"付款完成")):(d(),n("span",$,"未付款"))])])])])]),o.order.is_paid?f("",!0):(d(),n("button",{key:0,type:"button",class:"btn btn-primary float-end",onClick:e[1]||(e[1]=(...r)=>i.payOrder&&i.payOrder(...r))},"確認付款"))])])])])],64)}const dt=m(v,[["render",et]]);export{dt as default};
