import{c as f}from"./UserCartStore-189515c3.js";import{m as $,_ as k,o as d,b as a,d as t,f as c,t as l,a as M,r as h,e as m,h as u,F as b,E as P,w as y,I as D,g,G as w,H as A,p as U,i as S}from"./index-12cc667c.js";import{M as V}from"./modal-7dafb2ae.js";import{U as L}from"./UserCartStepComponent-b75a7b76.js";import"./component-functions-b651de0d.js";import"./focustrap-4fdcd9f3.js";const E={props:["product"],data(){return{modal:{},id:""}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()},...$(f,["addToCart","getCarts","updateCartItem","deleteItem","deleteAllItem","createOrder","getOrders"])},mounted(){this.modal=new V(this.$refs.delmodal)}},T={id:"delProductModal",ref:"delmodal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},O={class:"modal-dialog"},B={class:"modal-content border-0"},N=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delProductModalLabel",class:"modal-title"},[t("span",null,"刪除產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),R={class:"modal-body"},j={class:"text-danger"},H={class:"modal-footer"},q=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function F(e,r,_,I,C,i){return d(),a("div",T,[t("div",O,[t("div",B,[N,c(" "+l(_.product)+" ",1),t("div",R,[c(" 是否刪除 "),t("strong",j,l(_.product.title),1),c(" 商品(刪除後將無法恢復)。 ")]),t("div",H,[q,t("button",{type:"button",class:"btn btn-danger",onClick:r[0]||(r[0]=(...p)=>e.deleteItem&&e.deleteItem(...p))}," 確認刪除 ")])])])],512)}const G=k(E,[["render",F]]);const{VITE_APP_URL:z,VITE_APP_PATH:J}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},K={data(){return{products:[],tempProduct:{}}},components:{UserCartStepComponent:L,DelModal:G},methods:{getProducts(){this.$http.get(`${z}api/${J}/products/all`).then(e=>{console.log("產品列表:",e.data.products),this.products=e.data.products})},getProduct(e){this.$router.push(`/product/${e}`)},openDelProductModal(e){this.tempProduct={...e},console.log(this.tempProduct),this.$refs.delModal.showModal()},...$(f,["addToCart","getCarts","updateCartItem","deleteItem","deleteAllItem","createOrder","getOrders"])},computed:{...M(f,["cartData","cartsLength"])},mounted(){this.getProducts(),this.getCarts()}},n=e=>(U("data-v-4f113f58"),e=e(),S(),e),Q={key:0,class:"container"},W={class:"text-start"},X=n(()=>t("i",{class:"bi bi-trash3 text-danger me-2"},null,-1)),Y={class:"table align-middle table-hover"},Z=n(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"100px"}},"數量"),t("th",{class:"text-end"},"單價"),t("th")])],-1)),tt=["onClick"],et=["src"],ot=["onClick"],st={class:"input-group input-group-sm"},dt=["onUpdate:modelValue","onChange"],at=["value"],lt={class:"text-end"},nt={class:"text-end"},rt=["onClick"],ct=n(()=>t("i",{class:"bi bi-trash3 text-danger"},null,-1)),it=[ct],ut=n(()=>t("td",{colspan:"3",class:"text-end"},"總計",-1)),_t={class:"text-end"},pt=n(()=>t("td",null,null,-1)),ht=n(()=>t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)),mt={class:"text-end text-success"},bt=n(()=>t("td",null,null,-1)),gt={class:"container"},ft={class:"row"},Ct={class:"d-flex justify-content-between"};function vt(e,r,_,I,C,i){const p=h("UserCartStepComponent"),v=h("router-link"),x=h("DelModal");return d(),a(b,null,[m(p),e.cartsLength>0?(d(),a("div",Q,[t("div",W,[e.cartsLength>0?(d(),a("a",{key:0,class:"border-bottom border-danger text-danger",type:"button",onClick:r[0]||(r[0]=(...o)=>e.deleteAllItem&&e.deleteAllItem(...o))},[X,c("清空所有商品")])):u("",!0)]),t("table",Y,[Z,t("tbody",null,[e.cartData.carts?(d(!0),a(b,{key:0},P(e.cartData.carts,o=>(d(),a("tr",{key:o.id},[t("td",null,[t("a",{href:"#",onClick:g(s=>i.getProduct(o.product.id),["prevent"])},[t("img",{src:o.product.imageUrl,alt:"",class:"object-fit d-none d-md-block rounded-4",style:{width:"100px",height:"100px"}},null,8,et)],8,tt)]),t("td",null,[t("a",{href:"#",class:"text-dark",onClick:g(s=>i.getProduct(o.product.id),["prevent"])},l(o.product.title),9,ot)]),t("td",null,[t("div",st,[w(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":s=>o.qty=s,onChange:s=>e.updateCartItem(o)},[(d(),a(b,null,P(20,s=>t("option",{value:s,key:s+"1234578"},l(s),9,at)),64))],40,dt),[[A,o.qty]])])]),t("td",lt,l(o.total),1),t("td",nt,[t("a",{href:"",onClick:g(s=>i.openDelProductModal(o.product),["prevent"])},it,8,rt)])]))),128)):u("",!0)]),t("tfoot",null,[t("tr",null,[ut,t("td",_t,l(e.cartData.total),1),pt]),t("tr",null,[ht,t("td",mt,l(e.cartData.final_total),1),bt])])])])):u("",!0),t("div",gt,[t("div",ft,[t("div",Ct,[m(v,{to:"/products",class:"btn btn-outline-primary px-5"},{default:y(()=>[c("繼續選購")]),_:1}),e.cartsLength>0?(d(),D(v,{key:0,to:"/checkout",class:"btn btn-danger px-5"},{default:y(()=>[c("下一步 ")]),_:1})):u("",!0)])])]),m(x,{product:C.tempProduct,ref:"delModal",onDelProduct:e.deleteItem},null,8,["product","onDelProduct"])],64)}const Mt=k(K,[["render",vt],["__scopeId","data-v-4f113f58"]]);export{Mt as default};
