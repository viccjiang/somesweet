import{U as u}from"./UserCartStepComponent-073cb7cc.js";import{_ as m,r as w,o as n,b as i,e as y,d as t,t as s,F as _,i as b,h as f,f as v}from"./index-48c302ed.js";const{VITE_APP_URL:p,VITE_APP_PATH:a}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},g={data(){return{order:{user:{}},orderId:""}},components:{UserCartStepComponent:u},methods:{getOrder(){const r=`${p}api/${a}/order/${this.orderId}`;this.$http.get(r).then(e=>{e.data.success&&(this.order=e.data.order,console.log(this.order))})},payOrder(){const r=`${p}v2/api/${a}/pay/${this.orderId}`;this.$http.post(r).then(e=>{e.data.success&&(this.order.is_paid=!0,this.$router.push({path:"/order_completed",query:{id:this.orderId}}),this.getOrder())})},copyCouponCode(r){const e=l=>document.querySelector(l);e("#orderSave").addEventListener("click",()=>{navigator.clipboard.writeText(e("#orderId").textContent),this.showAlert()})},showAlert(){this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",this.$swal.stopTimer),e.addEventListener("mouseleave",this.$swal.resumeTimer)}}).fire({icon:"success",title:"優惠碼複製成功"})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()},mounted(){this.copyCouponCode()}},C={class:"bg-light pt-5 pb-7 mt-5"},x={class:"container"},P={class:"row justify-content-center flex-column flex-md-row"},E={class:"col-md-8 sticky-lg-top position-lg-sticky h-50"},I={class:"border rounded-4 p-4 mb-4"},T={class:"d-flex justify-content-between"},k=t("h4",{class:"mb-4"},"訂購資訊",-1),O={class:"table align-middle"},A={class:"align-middle"},V=t("th",{scope:"col"},"訂購編號",-1),S={scope:"col",id:"orderId"},U=t("th",{scope:"col"},"訂購日期",-1),L={scope:"col"},B=t("th",{scope:"row"},"姓名",-1),D=t("th",{scope:"row"},"Email",-1),N=t("th",{scope:"row"},"電話",-1),R={scope:"row"},j=t("th",{scope:"row"},"地址",-1),q={scope:"row"},$=t("th",{scope:"row"},"訂購產品",-1),F={scope:"row"},H={class:"w-100"},M={class:""},z={class:"mb-0"},G={class:"mb-0"},J=t("th",{scope:"row"},"付款金額",-1),K={scope:"row"},Q=t("th",{scope:"row"},"付款方式",-1),W={scope:"row"},X=t("th",{scope:"row"},"付款狀態",-1),Y={scope:"row"},Z={key:0,class:"text-danger"},tt={key:1,class:"text-success"};function et(r,e,l,ot,o,c){const h=w("UserCartStepComponent");return n(),i(_,null,[y(h),t("div",C,[t("div",x,[t("div",P,[t("div",E,[t("div",I,[t("div",T,[k,t("button",{type:"button",id:"orderSave",class:"btn btn-outline-primary",onClick:e[0]||(e[0]=d=>c.copyCouponCode(o.order.id))},"複製訂單編號")]),t("table",O,[t("thead",null,[t("tr",A,[V,t("th",S,[t("span",null,s(o.order.id),1)])])]),t("tbody",null,[t("tr",null,[U,t("td",L,s(o.order.create_at),1)]),t("tr",null,[B,t("td",null,s(o.order.user.name),1)]),t("tr",null,[D,t("td",null,s(o.order.user.email),1)]),t("tr",null,[N,t("td",R,s(o.order.user.tel),1)]),t("tr",null,[j,t("td",q,s(o.order.user.address),1)]),t("tr",null,[$,t("td",F,[(n(!0),i(_,null,b(o.order.products,d=>(n(),i("div",{class:"",key:d.id},[t("div",H,[t("div",M,[t("p",z,[v(s(d.product.title)+" ",1),t("span",G," x "+s(d.qty),1)])])])]))),128))])]),t("tr",null,[J,t("td",K,s(o.order.total),1)]),t("tr",null,[Q,t("td",W,s(o.order.user.shipping),1)]),t("tr",null,[X,t("td",Y,[o.order.is_paid?(n(),i("span",tt,"付款完成")):(n(),i("span",Z,"未付款"))])])])])]),o.order.is_paid?f("",!0):(n(),i("button",{key:0,type:"button",class:"btn btn-primary float-end",onClick:e[1]||(e[1]=(...d)=>c.payOrder&&c.payOrder(...d))},"確認付款"))])])])])],64)}const dt=m(g,[["render",et]]);export{dt as default};
